{"version":3,"sources":["modules/Components/BannerUpload.js"],"names":["BannerUpload","props","type","location","state","pathLink","titleText","useState","preImages","setPreImages","currImage","setCurrImage","picType","setPicType","useEffect","getPrevBannerImage","a","FetchAPI","result","imageList","isNullOrUndefined","length","map","data","is_active","console","log","handleSetPrevImage","e","imageId","target","name","split","id","Number","updateBannerProduct","preventDefault","doc","FileReaders","toBase64","document","getElementById","files","alert","className","href","data-dismiss","aria-label","aria-hidden","data-type","onSubmit","class","for","src","API_URL","image_name","onClick","align","accept","onChange","window","File","FileList","FileReader","file","undefined","fileReader","onload","setAttribute","readAsDataURL","required","removeAttribute","value"],"mappings":"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","file":"static/js/18.4e3b967d.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {isNullOrUndefined} from 'util';\n\n// import Components\nimport Header from './Header';\nimport Sidebar from './Sidebar.js';\nimport FetchAPI from '../../api/APIs';\nimport { API_URL } from '../../api/config/Constants.js';\n\nimport FileReaders from  '../../utils/fileReader.js';\n\n\n\nexport default function BannerUpload(props) {\n    const type = props.location.state.type;\n  \n    let pathLink = '';\n    let titleText = '';\n    switch(type){\n        case 'Home'          :   titleText = 'Home'          ; pathLink = '/home';          break;\n        case 'Event'         :   titleText = 'Event'         ; pathLink = '/Events';        break;\n        case 'Miracle'       :   titleText = 'Miracle'       ; pathLink = '/Miracles';      break;\n        case 'Direction'     :   titleText = 'Direction'     ; pathLink = '/Directions';    break;\n        case 'OBE'           :   titleText = 'OBE'           ; pathLink = '/OBEs';          break;\n        case 'Prayer'        :   titleText = 'Prayer'        ; pathLink = '/Prayers';       break;\n        case 'Contact'       :   titleText = 'Contact'       ; pathLink = '/Contact';       break;        \n        case 'About'         :   titleText = 'About'         ; pathLink = '/home';          break;\n        case 'Blog'          :   titleText = 'Blogs'         ; pathLink = '/Blog';          break;\n\n        case 'DimpleAnil'    :   titleText = 'DimpleAnil'    ; pathLink = '/DimpleAnil';    break;\n        case 'AboutGC'       :   titleText = 'AboutGC'       ; pathLink = '/AboutGC';       break;\n        case 'Introduction'  :   titleText = 'Introduction'  ; pathLink = '/Introduction';  break;\n        \n   }\n    \n  \n    \n  \n    const [preImages, setPreImages] = useState([]);\n    const [currImage, setCurrImage] = useState('');\n    const [picType, setPicType] = useState(0); // 0 = no change, 1 = new upload, 2 = select from prev    \n    \n\n    useEffect(() => {\n      getPrevBannerImage();\n    },[]);\n\n    const getPrevBannerImage = async ()=> {\n      try{\n        const result = await FetchAPI.getPrevBannerImage({type: 'banner'+type});\n        setPreImages(result.imageList);\n        ((!isNullOrUndefined(result.imageList) && result.imageList.length > 0) ? result.imageList : []).map(data => {\n            if(data.is_active === 1){\n                setCurrImage(data);\n            }\n        })\n      }catch(e){\n        console.log('Error...', e);\n      }\n    }\n\n\n  const handleFileChange = (e) => {\n      if (window.File && window.FileList && window.FileReader) {\n          let file = e.target.files[0];\n          if(file !== null && file !== undefined && file !== \"\"){\n              let fileReader = new FileReader();\n              fileReader.onload = (e) => {\n                  document.getElementById(\"bannerImageThumb\").setAttribute('src',e.target.result);\n                  document.getElementById(\"bannerImageThumb\").setAttribute('title', \"Selected image\");\n              }\n              fileReader.readAsDataURL(file);\n              setPicType(1);\n          }\n      } else {\n          alert(\"Your browser doesn't support to File API\")\n      }\n  }\n\n  const handleFileRemove = (e) => {\n      document.getElementById(\"bannerImageThumb\").removeAttribute('src');\n      document.getElementById(\"bannerImageThumb\").removeAttribute('title');\n      document.getElementById(\"bannerImage\").value = '';\n      setPicType(0);\n  }\n\n  const handleSetPrevImage = (e) => {\n      let imageId = (e.target.name).split('-')[1];\n      (preImages.length > 0 ? preImages : []).map(data => {\n        if(data.id == Number(imageId)){\n              setCurrImage(data);\n              setPicType(2);\n          }\n      })\n  }\n\n\nconst updateBannerProduct = async (e) => {\n    e.preventDefault();\n    try{\n        let doc = '';\n        let imageId = 0;\n        if(picType === 1){\n            doc = await FileReaders.toBase64(document.getElementById('bannerImage').files[0]);\n        }else if(picType === 2){\n            imageId = currImage.id;\n        }\n        const result = await FetchAPI.updateBannerProduct({\n            picType : picType,\n            imageId : imageId,\n            document : doc,\n            type : 'banner'+type,\n        });\n        alert (\"Image Updated Successfully\");\n        getPrevBannerImage();\n    }catch(e){\n        console.log('Error...', e);\n    }\n}\n\n    return (\n        <div>\n            <Header />\n            <Sidebar />\n                <div className=\"sidebar-overlay\" id=\"sidebar-overlay\" />\n                <div className=\"sidebar-mobile-menu-handle\" id=\"sidebar-mobile-menu-handle\" />\n                <div className=\"mobile-menu-handle\" />\n                <article className=\"content responsive-tables-page\">\n                    <div className=\"title-block\">\n                        <h3 className=\"title\"> { ` Banner Image >>> `+ titleText}\n                            <a href= {pathLink}>\n                                <button type=\"button\"  className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                    <span aria-hidden=\"true\">Ã—</span>\n                                    <span className=\"sr-only\">Close</span>\n                                </button>\n                            </a>\n                            <span className=\"sparkline bar\" data-type=\"bar\" />\n                        </h3>\n                    </div>\n                    \n                    <form onSubmit={updateBannerProduct} class=\"p-5 bg-light b-top-dark\">\n                        <div className=\"form-group row\">\n                            <div class=\"col-md-12\">\n                                <div class=\"form-group\">\n                                    <label for=\"description\">Previous Images *</label>\n                                    <div className=\"w-100\">\n                                        {(preImages.length > 0 ? preImages : []).map(data => {\n                                            return(\n                                                <span>\n                                                    <img class=\"imageBox\" name={\"prevImage-\" + data.id} src={API_URL + \"/api/images?path=bannerImages/\" + data.image_name} onClick={handleSetPrevImage} />\n                                                </span>\n                                            )\n                                        })}\n                                    </div>\n                                </div>\n                            </div>                                       \n                            <div class=\"col-md-12\">\n                                <div class=\"form-group\">\n                                    <div class=\"field\" align=\"left\">\n                                        <label for=\"bannerImage\">Choose File to upload new image</label>\n                                        <input type=\"file\" className=\"form-control\" id=\"bannerImage\" name=\"bannerImage\" accept=\".png, .jpg, .jpeg\" onChange={handleFileChange} required={preImages.length === 0} />\n                                    </div>\n                                </div>\n                                <span>\n                                    <img className=\"imageThumb\" id=\"bannerImageThumb\" src={API_URL + \"/api/images?path=bannerImages/\" + currImage.image_name} />\n                                    <br/>\n                                    <span className=\"remove\" onClick={handleFileRemove}>Remove image</span>\n                                </span>\n                            </div> \n                            <div class=\"col-md-12\">\n                                <input type=\"submit\" value=\"Update\" class=\"btn  px-4 btn-primary\" />\n                            </div> \n                        </div>\n                    </form>\n                </article>\n            </div>\n        )\n}"],"sourceRoot":""}